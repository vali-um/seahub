(this["webpackJsonpseahub-frontend"]=this["webpackJsonpseahub-frontend"]||[]).push([[33],{1253:function(t,e,n){t.exports=n(1254)},1254:function(t,e,n){"use strict";n.r(e);var a=n(5),i=n(6),r=n(26),s=n(8),c=n(7),o=n(0),p=n.n(o),u=n(23),l=n.n(u),d=n(10),h=n(4),v=n(1),f=n(130),g=n(104),m=n(9),S=n(197),b=n.n(S),P=(n(181),n(159),n(284),n(416),n(417),n(418),n(147),n(419),n(420),n(239),n(221),n(421),window.app.pageOptions),C=P.err,O=P.fileExt,j=P.fileContent,y=P.repoID,E=P.filePath,k=P.fileName,w=P.canEditFile,x=P.username,F={lineNumbers:!0,mode:h.a.chooseLanguage(O),extraKeys:{Ctrl:"autocomplete"},theme:"default",textWrapping:!0,lineWrapping:!0,readOnly:!w,cursorBlinkRate:w?530:-1},N=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).updateContent=function(t){i.setState({needSave:!0,content:t})},i.addParticipant=function(){m.a.addFileParticipants(y,E,[x]).then((function(t){200===t.status&&(i.isParticipant=!0,i.getParticipants())}))},i.getParticipants=function(){m.a.listFileParticipants(y,E).then((function(t){var e=t.data.participant_list;i.setState({participants:e}),e.length>0&&(i.isParticipant=e.every((function(t){return t.email==x})))}))},i.onParticipantsChange=function(){i.getParticipants()},i.state={content:j,needSave:!1,isSaving:!1,participants:[]},i.onSave=i.onSave.bind(Object(r.a)(i)),i.isParticipant=!1,i}return Object(i.a)(n,[{key:"onSave",value:function(){var t=this;this.isParticipant||this.addParticipant();return m.a.getUpdateLink(y,"/").then((function(e){var n=e.data;return t.setState({isSaving:!0}),m.a.updateFile(n,E,k,t.state.content).then((function(){d.a.success(Object(v.nb)("Successfully saved"),{duration:2}),t.setState({isSaving:!1,needSave:!1})}))}))}},{key:"componentDidMount",value:function(){this.getParticipants()}},{key:"render",value:function(){return p.a.createElement(f.a,{content:p.a.createElement(B,{content:this.state.content,updateContent:this.updateContent}),isSaving:this.state.isSaving,needSave:this.state.needSave,onSave:this.onSave,participants:this.state.participants,onParticipantsChange:this.onParticipantsChange})}}]),n}(p.a.Component),B=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return C?p.a.createElement(g.a,null):p.a.createElement("div",{className:"file-view-content flex-1 text-file-view"},p.a.createElement(b.a,{ref:"code-mirror-editor",value:this.props.content,options:F,onChange:this.props.updateContent}))}}]),n}(p.a.Component);l.a.render(p.a.createElement(N,null),document.getElementById("wrapper"))}},[[1253,1,0]]]);
//# sourceMappingURL=viewFileText.chunk.js.map